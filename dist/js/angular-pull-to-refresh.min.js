!function(){"use strict";angular.module("nx.widget",[])}(),function(){"use strict";angular.module("nx.widget").constant("pullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"pull to refresh",release:"release to refresh",loading:"refreshing..."},icon:{pull:"fa fa-arrow-down",release:"fa fa-arrow-up",loading:"fa fa-refresh fa-spin"}})}(),function(){"use strict";angular.module("nx.widget").directive("pullToRefresh",function(e,n,t,i){return{scope:!0,restrict:"A",transclude:!0,templateUrl:'<div class="nx-widget-pull-to-refresh"><i ng-class="icon[status]"></i>&nbsp;<span ng-bind="text[status]"></span></div><div ng-transclude></div>',compile:function(e,o,r){return function(e,o,r){var a=angular.extend({},i,r),u=o.parent(),l=window.ptr=o.children()[0];e.text=a.text,e.icon=a.icon,e.status="pull";var s=function(n){c="release"===n,e.$apply(function(){e.status=n})},c=!1;o.bind("touchmove",function(e){var n=u[0].scrollTop;n<-a.treshold&&!c?s("release"):n>-a.treshold&&c&&s("pull")}),o.bind("touchend",function(i){if(c){l.style.webkitTransitionDuration=0,l.style.margin="0 auto",s("loading");var o=+new Date;t.when(e.$eval(r.pullToRefresh)).then(function(){var t=+new Date-o;n(function(){l.style.margin="",l.style.webkitTransitionDuration="",e.status="pull"},t<a.debounce?a.debounce-t:0)})}}),e.$on("$destroy",function(){o.unbind("touchmove"),o.unbind("touchend")})}}}})}();