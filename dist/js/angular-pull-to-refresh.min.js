!function(){"use strict";angular.module("nx.widget",[])}(),function(){"use strict";angular.module("nx.widget").constant("nxPullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"pull to refresh",release:"release to refresh",loading:"refreshing..."},icon:{pull:"fa fa-arrow-down",release:"fa fa-arrow-up",loading:"fa fa-refresh fa-spin"}})}(),function(){"use strict";angular.module("nx.widget").directive("nxPullToRefresh",function(n,e,t,o){return{scope:!0,restrict:"A",transclude:!0,templateUrl:'<div class="nx-widget-pull-to-refresh"><i ng-class="icon[status]"></i>&nbsp;<span ng-bind="text[status]"></span></div><div ng-transclude></div>',compile:function(n,o,i){return function(n,o,i){var r=angular.extend({},nxPullToRefreshConfig,i),l=o.parent(),u=window.ptr=o.children()[0];n.text=r.text,n.icon=r.icon,n.status="pull";var a=function(e){s="release"===e,n.$apply(function(){n.status=e})},s=!1;o.bind("touchmove",function(n){var e=l[0].scrollTop;e<-r.treshold&&!s?a("release"):e>-r.treshold&&s&&a("pull")}),o.bind("touchend",function(o){if(s){u.style.webkitTransitionDuration=0,u.style.margin="0 auto",a("loading");var l=+new Date;t.when(n.$eval(i.pullToRefresh)).then(function(){var t=+new Date-l;e(function(){u.style.margin="",u.style.webkitTransitionDuration="",n.status="pull"},t<r.debounce?r.debounce-t:0)})}}),n.$on("$destroy",function(){o.unbind("touchmove"),o.unbind("touchend")})}}}})}();