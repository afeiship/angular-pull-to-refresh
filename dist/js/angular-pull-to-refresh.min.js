!function(){"use strict";angular.module("nx.widget",[])}(),function(){"use strict";angular.module("nx.widget").constant("nxPullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"pull to refresh",release:"release to refresh",loading:"refreshing..."},icon:{pull:"fa fa-arrow-down",release:"fa fa-arrow-up",loading:"fa fa-refresh fa-spin"}})}(),function(){"use strict";angular.module("nx.widget").directive("nxPullToRefresh",function(n,t,e,o){return{scope:!0,restrict:"A",transclude:!0,template:'<div class="nx-widget-pull-to-refresh"><i ng-class="icon[status]"></i>&nbsp;<span ng-bind="text[status]"></span></div><div ng-transclude></div>',compile:function(n,t,e){return function(n,t,e){function s(n){t.css({"-webkit-transition":"all "+n+"s",transition:"all "+n+"s"})}function r(){i(0-f),l=!1}function i(n){t.css({"-webkit-transform":"translate(0,"+n+"px)",transform:"translate(0,"+n+"px)"})}var l,u,a,c,d=angular.extend({},o,e),f=(t.parent(),window.ptr=t.children()[0],d.treshold),p=n.$eval(e.pullToRefresh);console.log(t),n.text=d.text,n.icon=d.icon,n.status="pull",t.bind("touchstart",function(n){t[0].scrollTop<=0&&!l&&(l=!0,u=!0,a=n.touches[0].pageY,s(0))}),t.bind("touchmove",function(n){console.log(t[0].scrollTop),u&&(c=n.touches[0].pageY,n.preventDefault(),s(0),i(c-a-f))}),t.bind("touchend",function(n){console.log("touch end!!!"),u&&(u=!1,c-a>=f?(s(1),i(0),"function"==typeof p&&p()):r())}),n.$on("$destroy",function(){t.unbind("touchstart"),t.unbind("touchmove"),t.unbind("touchend")})}}}})}();