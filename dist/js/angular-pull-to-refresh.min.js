!function(){"use strict";angular.module("nx.widget",[])}(),function(){"use strict";angular.module("nx.widget").constant("nxPullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"pull to refresh",release:"release to refresh",loading:"refreshing..."},icon:{pull:"fa fa-arrow-down",release:"fa fa-arrow-up",loading:"fa fa-refresh fa-spin"}})}(),function(){"use strict";angular.module("nx.widget").directive("nxPullToRefresh",function(n,e,t,i){return{scope:!0,restrict:"A",transclude:!0,templateUrl:'<div class="nx-widget-pull-to-refresh"><i ng-class="icon[status]"></i>&nbsp;<span ng-bind="text[status]"></span></div><div ng-transclude></div>',compile:function(n,o,r){return function(n,o,r){var a=angular.extend({},i,r),u=o.parent(),l=window.ptr=o.children()[0];n.text=a.text,n.icon=a.icon,n.status="pull";var s=function(e){c="release"===e,n.$apply(function(){n.status=e})},c=!1;o.bind("touchmove",function(n){var e=u[0].scrollTop;e<-a.treshold&&!c?s("release"):e>-a.treshold&&c&&s("pull")}),o.bind("touchend",function(i){if(c){l.style.webkitTransitionDuration=0,l.style.margin="0 auto",s("loading");var o=+new Date;t.when(n.$eval(r.nxPullToRefresh)).then(function(){var t=+new Date-o;e(function(){l.style.margin="",l.style.webkitTransitionDuration="",n.status="pull"},t<a.debounce?a.debounce-t:0)})}}),n.$on("$destroy",function(){o.unbind("touchmove"),o.unbind("touchend")})}}}})}();