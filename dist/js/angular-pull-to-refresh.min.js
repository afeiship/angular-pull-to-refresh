!function(){"use strict";angular.module("nx.widget",[])}(),function(){"use strict";angular.module("nx.widget").constant("nxPullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"pull to refresh",release:"release to refresh",loading:"refreshing..."},icon:{pull:"fa fa-arrow-down",release:"fa fa-arrow-up",loading:"fa fa-refresh fa-spin"}})}(),function(){"use strict";angular.module("nx.widget").directive("nxPullToRefresh",function(n,t,e,o){return{scope:!0,restrict:"A",transclude:!0,template:'<div class="nx-widget-pull-to-refresh"><i ng-class="icon[status]"></i>&nbsp;<span ng-bind="text[status]"></span></div><div ng-transclude></div>',compile:function(n,t,e){return function(n,t,e){function s(n){t.css({"-webkit-transition":"all "+n+"s",transition:"all "+n+"s"})}function r(){i(0-p),u=!1}function i(n){t.css({"-webkit-transform":"translate(0,"+n+"px)",transform:"translate(0,"+n+"px)"})}var u,a,l,c,f=angular.extend({},o,e),d=t.parent(),p=(window.ptr=t.children()[0],f.treshold),h=n.$eval(e.pullToRefresh);n.text=f.text,n.icon=f.icon,n.status="pull";t.bind("touchstart",function(n){u=!0,a=!0,l=n.touches[0].pageY,s(0)}),t.bind("touchmove",function(n){d[0].scrollTop<=0&&a&&(c=n.touches[0].pageY,l<c&&(n.preventDefault(),s(0),i(c-l-p)))}),t.bind("touchend",function(n){a&&(a=!1,c-l>=p?(s(1),i(0),"function"==typeof h&&h()):(console.log("reset!!!"),r()))}),n.$on("$destroy",function(){t.unbind("touchstart"),t.unbind("touchmove"),t.unbind("touchend")})}}}})}();