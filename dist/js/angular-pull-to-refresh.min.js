!function(){"use strict";angular.module("nx.widget",[])}(),function(){"use strict";angular.module("nx.widget").constant("nxPullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"下拉刷新",release:"释放更新",loading:"加载数据",complete:"加载完成"}})}(),function(){"use strict";angular.module("nx.widget").directive("nxPullToRefresh",function(e,t,n,o){return{scope:!0,restrict:"A",transclude:!0,template:'<div class="nx-widget-pull-to-refresh-indecator"><span ng-bind="text[status]"></span></div><div ng-transclude></div>',compile:function(e,t,l){return function(e,t,l){var s,u,a,i,r,c=angular.extend({},o,l),d=angular.element(document.body),g=t.parent(),f=t.children()[0],p=f.nextElementSibling,h=!1;e.text=c.text,e.status="pull",t.addClass("nx-widget-pull-to-refresh-wrapper"),angular.element(p).addClass("nx-widget-pull-to-refresh-scroller");var x=function(t){e.$apply(function(){e.status=t,h="release"===t})},m=function(e,t){p.style.WebkitTransform="translate3d(0,"+e+"px,0)",p.style.WebkitTransition="all "+t+"s"};g.bind("touchstart",function(e){s=e.touches[0].pageY,i=Date.now()}),d.bind("touchmove",function(t){u=t.touches[0].pageY-s,r=Date.now()-i,a=u/3,m(a,0),f.style.WebkitTransform="translate3d(0,"+(a/2-20)+"px,0)",console.log(e.status,h),u>100&&r>400&&u-a>60&&x("release")}),d.bind("touchend",function(t){console.log(h),h&&(h=!1,x("loading"),console.log("loading..."),n.when(e.$eval(l.nxPullToRefresh)).then(function(){e.status="complete"},100))}),e.$on("$destroy",function(){g.unbind("touchstart"),d.unbind("touchmove"),d.unbind("touchend")})}}}})}();